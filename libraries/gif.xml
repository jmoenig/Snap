<blocks app="Snap! 6, https://snap.berkeley.edu" version="1"><block-definition s="snapshot GIF" type="command" category="pen"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l></l></list><l>var stageCanvas = world.children[0].stage.fullImage();&#xD;var img = document.createElement(&apos;img&apos;);&#xD;img.src = stageCanvas.toDataURL(&apos;image/png&apos;);&#xD;&#xD;function addFrame() {&#xD;	if (!window.GIF_FRAMES) {&#xD;		window.GIF_FRAMES = new GIF({&#xD;			workers: 2,&#xD;			quality: 10,&#xD;			workerScript: &apos;libraries/gif.worker.js&apos;&#xD;		});&#xD;		window.GIF_FRAMES.on(&apos;finished&apos;, function(blob) {&#xD;			window.open(URL.createObjectURL(blob));&#xD;		});&#xD;	}&#xD;	window.GIF_FRAMES.addFrame(img, {delay: 10});&#xD;}&#xD;&#xD;if (!window.GIF) {&#xD;	var script = document.createElement(&apos;script&apos;);&#xD;	script.src = &apos;libraries/gif.js&apos;;&#xD;	script.onload = function() {&#xD;		addFrame();&#xD;	}&#xD;	document.head.appendChild(script);&#xD;} else {&#xD;	addFrame();&#xD;}</l></block><list></list></block></script></block-definition><block-definition s="export GIF" type="command" category="pen"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l></l></list><l>window.GIF_FRAMES.render();</l></block><list></list></block></script></block-definition><block-definition s="reset GIF" type="command" category="pen"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l></l></list><l>window.GIF_FRAMES = null;</l></block><list></list></block></script></block-definition></blocks>