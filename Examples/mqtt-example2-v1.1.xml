<project name="mqtt-test" app="Snap! 5.4, http://snap.berkeley.edu" version="1"><notes></notes><thumbnail>data:image/png;base64,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</thumbnail><stage name="ScÃ¨ne" width="480" height="360" costume="0" color="255,255,255,1" tempo="60" threadsafe="false" penlog="false" volume="100" pan="0" lines="round" ternary="false" codify="false" inheritance="true" sublistIDs="false" scheduled="false" id="1"><pentrails>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAFoCAYAAACPNyggAAAOhUlEQVR4Xu3VwQkAAAjEMN1/abewn7jAQRC64wgQIECAAIF3gX1fNEiAAAECBAiMAHsCAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQIHLFxAWmhEwHPAAAAAElFTkSuQmCC</pentrails><costumes><list struct="atomic" id="2"></list></costumes><sounds><list struct="atomic" id="3"></list></sounds><variables></variables><blocks></blocks><scripts></scripts><sprites><sprite name="Lutin" idx="1" x="-39.47939262472869" y="-9.8698481561822" heading="90" scale="1" volume="100" pan="0" rotation="1" draggable="true" costume="1" color="80,80,80,1" pen="tip" id="8"><costumes><list id="9"><item><costume name="on" center-x="52" center-y="52" image="data:image/png;base64,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" id="10"/></item><item><costume name="off" center-x="52" center-y="52" image="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABoCAYAAAAdHLWhAAAFn0lEQVR4Xu2dS29bRRTH/+4jtYkfKqU8pFZK0gXsIbAe+AKsukStVBOaSiyQ6hJc0VDkWjWIBYJUaQRULLPhGzBbVGAPErSFsuAlwI8Q82iLruEax7n2nZk7d+6x7/HWM+f85/zmzJ25j5kMJugn53DPhlxxCxkbdlzYIC3UFpCwQFIGRgvQRu6IrG3fDgtonP+Ls7OP4MzW93H60LGdPKD1wgOy3v5JR7SrsuJc/iGc7vzoyl+Qn8QAuRq+bAU3qWHQOaBJAzMM2DUod4A2svOy1r1hq0cnaUdUswsod2+60BA/oPdQkK+j5aIxrn2IFcxiCb/H6Tc+QPeQkfO4G6d4KrbFTexBxs4abbhN8QBaKx2UjeYvVALoQoc4iwLOoGPbl31AV4uL8lLrum2hk2BPvFJ8Es+3PrWp1SqgSZ+h2QqszZmeNUAMZydeW5CiA9rEXlnB37Z63zTZEQ3sw3HcidKmaIA2MSMr+COKgGmvKxo4gOP407Sd5oDWcZ+sY8vUcZrqRVkvmQFK0RrHVkcyvSYZAeIJgRk2E0jagBiOGRy/li4kLUAMJxocr7ao5p9BufOxqiV1QFfyD8rLnR9UDXO50REQ1dmHUd5SiqUaIJ4UWO9vqjdYlQDx0GadT8+gyvUoHNBG6XFZa34Wj8R0WxUvlxbxwvjYhgLi7Im3E4Vl0VhADCdeOCpT79GA3ikckm+2f3YjMd1exj3sGwmIs8dtpxk11AUDWkdJ1vGbW4np9iYu4CBO7o55ICDOnmQ6S1AW7QbE2ZMMHW9ddAE5nER3UMAuQJw9ifEJXLwyoGR57PI+PMztAMTZQ4PWICQGRIPJDhXBgFaxT17DXwT1pk6SOIH9WP33Tal+BvHwRqsf+FnEgGhx6athQETBDN9A7WUQD280aXlZxIBosukvWhkQAyIcAeLSeIibBEA8QaBNKcOAGBDtCBBXxxnEgIhHgLg8ziAGRDwCxOVxBjEg4hEgLo8ziAERjwBxeZxBDIh4BIjL4wxiQMQjQFxeBqvYI69F25GJeBsnVp44gb38yJswPn6iShiOJ40BMSDiESAur59BeBsH5Fs7v+wirn3q5fk7NfK72URR87vZRMH4shgQYUDiXHYep7u3PIn8hR1BUPwJJEEog5JGAsL7+cPyYrJHghGPXezyxErhMJb+3yOJP8OPPeR6DsZ+hu+Z4leB9QJqu3QoIIZkO+Tq9tT26uEsUo+o5ZLKgDiLLEdewZzefnGcRQohtVtEGxBnkV0A46yN21h2/K6/7+aOyje2v3UnNX2eRDV3FOXt70a1nLdlTrhPRNqWuad9Hftl3fwEqYTbT9q9WMEMlsZvYBWaQb0WXsnOyctujkYmHVGL4sT57BxOdb8JM6kGiGd1YXHU/j9saPMNKgPiWZ02g5EVVOF4BrQA4QNk5WvYtic1fZbES8jiRfWTM/UAefHkIwOMe5U4XzyEUy2tM871AfVmdqVjst78ylhpCiuKSukYlps3dJtuBqgHqfiUrLc+0XWYxvJRDmE3B9SDVHhW1tsfpTHoqm0WK/mnsdSRquWHy0UD5Fm7WlyUl1rXTQVMcz1RLT2BcvPzKG2MDoivSYHxN73m2M8g3+JG7oisbd+O0lumpe7wix9R2mUng3wFH2JWvopOFEGTXldcRB7P2TuE3i6g/6Kb1hdPdO4QqHbEWAD1nK+VFmSj+bWqkEkuZ+t6ExSD+AB53lJwHsTgOQtxdLJ4AfmKp/AccJPbNiYA3QDyla0VHpWN9hcmQqnUEZXCY1huf+lKj1tAEwzKNRg/VMkA6q+dsvOy1tW+geiq93p+RDW7gHJyT5OTBeRHehMzsqL+jMQFIP8bURe+xvmgAWhQYYITClEp3Y/l5q9JQxn0Tw/QUHTiXvTGsbi0CZg8oKDGmkKjDiOorf8AsEWo/OAwJEgAAAAASUVORK5CYII=" id="11"/></item></list></costumes><sounds><list struct="atomic" id="12"></list></sounds><blocks></blocks><variables></variables><scripts><script x="10" y="10"><block s="receiveGo"></block><custom-block s="# %code"><l>Load library</l></custom-block><custom-block s="Load MQTT $flag"></custom-block><block s="doSetVar"><l>got message</l><l>0</l></block><custom-block s="# %code"><l>Instansiate a MQTT client - change the broker address with your address&#xD;Codimeo MQTT broker is offered with no warranty of service and can be&#xD;down at any time</l></custom-block><block s="doSetVar"><l>Client</l><custom-block s="MQTT new client for broker %s with options %s"><l>wss://mqtt.codimeo.com:15676/ws</l><custom-block s="JSON from %l"><block s="reportNewList"><list><block s="reportNewList"><list><l>username</l><l>mqtt-test</l></list></block><block s="reportNewList"><list><l>password</l><l>mqtt-test</l></list></block></list></block></custom-block></custom-block></block><block s="doSwitchToCostume"><l>off</l></block></script><script x="502" y="37.800001000000066"><block s="receiveKey"><l><option>right arrow</option></l></block><custom-block s="Publish %s on %txt for %s"><l>right</l><l>Hello</l><block var="Client"/></custom-block></script><script x="752" y="39.80000100000018"><block s="receiveKey"><l><option>left arrow</option></l></block><custom-block s="Publish %s on %txt for %s"><l>left</l><l>Hello</l><block var="Client"/></custom-block></script><script x="503" y="114.80000100000012"><block s="receiveKey"><l><option>up arrow</option></l></block><custom-block s="Publish %s on %txt for %s"><l>up</l><l>Hello</l><block var="Client"/></custom-block></script><script x="747" y="123.80000100000007"><block s="receiveKey"><l><option>down arrow</option></l></block><custom-block s="Publish %s on %txt for %s"><l>down</l><l>Hello</l><block var="Client"/></custom-block></script><script x="652" y="488"><block s="receiveCondition"><block s="reportEquals"><block var="got message"/><l>1</l></block></block><custom-block s="# %code"><l>When message received, execute it</l></custom-block><block s="doIf"><block s="reportEquals"><block var="M"/><l>right</l></block><script><block s="changeXPosition"><l>10</l></block></script></block><block s="doIf"><block s="reportEquals"><block var="M"/><l>left</l></block><script><block s="changeXPosition"><l>-10</l></block></script></block><block s="doIf"><block s="reportEquals"><block var="M"/><l>up</l></block><script><block s="changeYPosition"><l>10</l></block></script></block><block s="doIf"><block s="reportEquals"><block var="M"/><l>down</l></block><script><block s="changeYPosition"><l>-10</l></block></script></block><block s="doSetVar"><l>got message</l><l>0</l></block></script><script x="23" y="287.0000000000002"><block s="receiveInteraction"><l><option>clicked</option></l></block><custom-block s="# %code"><l>Disconnect the client if connected</l></custom-block><block s="doIf"><custom-block s="%s is connected ?"><block var="Client"/></custom-block><script><custom-block s="End %s with force %b"><block var="Client"/><l/></custom-block><block s="doSwitchToCostume"><l>off</l></block><block s="doStopThis"><l><option>this block</option></l></block></script></block><custom-block s="# %code"><l>Connect the client if disconnected</l></custom-block><custom-block s="Connect %s"><block var="Client"/></custom-block><block s="doSwitchToCostume"><l>on</l></block><custom-block s="# %code"><l>Handle events</l></custom-block><custom-block s="on %s %txt %cs with %upvar %upvar %upvar"><block var="Client"/><l>connect</l><script><custom-block s="# %code"><l>Subscribe to the desired topic</l></custom-block><custom-block s="Subscribe %s to %s"><block var="Client"/><l>Hello</l></custom-block></script><l>arg1</l><l>arg2</l><l>arg3</l></custom-block><custom-block s="# %code"><l>When a message is received</l></custom-block><custom-block s="on %s %txt %cs with %upvar %upvar %upvar"><block var="Client"/><l>message</l><script><block s="doSetVar"><l>T</l><block var="topic"/></block><block s="doSetVar"><l>M</l><block s="evaluate"><block s="reportJSFunction"><list><l>message</l></list><l>console.log(message);&#xD;console.log(message.toString());&#xD;return message.toString()</l></block><list><block var="message"/></list></block></block><block s="doSetVar"><l>P</l><custom-block s="listify %s"><block s="evaluate"><block s="reportJSFunction"><list><l>p</l></list><l>return JSON.stringify(p)</l></block><list><block var="payload"/></list></block></custom-block></block><block s="doSetVar"><l>got message</l><l>1</l></block></script><l>topic</l><l>message</l><l>payload</l></custom-block><custom-block s="# %code"><l>When error</l></custom-block><custom-block s="on %s %txt %cs with %upvar %upvar %upvar"><block var="Client"/><l>error</l><script><block s="doRun"><block s="reportJSFunction"><list><l>error</l></list><l>console.log(error);</l></block><list><block var="error"/></list></block></script><l>error</l><l>arg2</l><l>arg3</l></custom-block><custom-block s="# %code"><l>When reconnect</l></custom-block><custom-block s="on %s %txt %cs with %upvar %upvar %upvar"><block var="Client"/><l>reconnect</l><script><block s="doRun"><block s="reportJSFunction"><list></list><l>console.log("reconnection...");</l></block><list></list></block></script><l>arg1</l><l>arg2</l><l>arg3</l></custom-block><custom-block s="# %code"><l>When offline</l></custom-block><custom-block s="on %s %txt %cs with %upvar %upvar %upvar"><block var="Client"/><l>offline</l><script><block s="doRun"><block s="reportJSFunction"><list></list><l>console.log("client offline...");</l></block><list></list></block></script><l>arg1</l><l>arg2</l><l>arg3</l></custom-block></script></scripts></sprite><watcher var="T" style="normal" x="11.524999999999864" y="38.41666474583312" color="243,118,29" hidden="true"/><watcher var="M" style="normal" x="7.683333333333394" y="65.30833141249977" color="243,118,29"/><watcher var="P" style="normal" x="10.56458333333353" y="103.72499807916645" color="243,118,29" hidden="true"/><watcher var="Client" style="normal" x="0" y="0" color="243,118,29" hidden="true"/><watcher var="got message" style="normal" x="9.604166666666742" y="9.604166666666679" color="243,118,29"/></sprites></stage><hidden></hidden><headers></headers><code></code><blocks><block-definition s="%&apos;method&apos; url: %&apos;url&apos; send: %&apos;payload&apos; headers: %&apos;headers&apos;" type="reporter" category="tinywebdb"><header></header><code></code><translations></translations><inputs><input type="%s" readonly="true">GET<options>GET&#xD;POST&#xD;PUT&#xD;DELETE</options></input><input type="%s">http://snap.berkeley.edu</input><input type="%s"></input><input type="%mult%l" readonly="true"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>method</l><l>url</l><l>data</l><l>headers</l><l>proc</l></list><l>var response, i, header;&#xD;if (!proc.httpRequest) {&#xD;  proc.httpRequest = new XMLHttpRequest();&#xD;  proc.httpRequest.open(method, url, true);&#xD;  proc.assertType(headers, &apos;list&apos;);&#xD;  for (i = 1; i &lt;= headers.length(); i += 1) {&#xD;    header = headers.at(i);&#xD;    proc.assertType(header, &apos;list&apos;);&#xD;    proc.httpRequest.setRequestHeader(&#xD;      header.at(1),&#xD;      header.at(2)&#xD;    );&#xD;  }&#xD;  proc.httpRequest.send(data || null);&#xD;} else if (proc.httpRequest.readyState === 4) {&#xD;  response = proc.httpRequest.responseText;&#xD;  proc.httpRequest = null;&#xD;  return response;&#xD;}&#xD;proc.pushContext(&apos;doYield&apos;);&#xD;proc.pushContext();</l></block><list><block var="method"/><block var="url"/><block var="payload"/><block var="headers"/></list></block></block></script></block-definition><block-definition s="key: %&apos;key&apos; value: %&apos;value&apos;" type="reporter" category="operators"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%s"></input></inputs><script><block s="doReport"><block s="reportNewList"><list><block var="key"/><block var="value"/></list></block></block></script></block-definition><block-definition s="curent location" type="reporter" category="tinywebdb"><comment x="0" y="0" w="200" collapsed="false">Reports a three-item list containing the latitude and longitude of the user, and the precision of the measurements.  Works only if the user allows snap.berkeley.edu access to location data.  Some browsers also require an HTTPS connection to Snap!.</comment><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>proc</l></list><l>if (!proc.geostarted) {&#xD;  var geo = navigator.geolocation;&#xD;  var cords = [];&#xD;  var options = {&#xD;    enableHighAccuracy: false,&#xD;  };&#xD;&#xD;  function success(pos) {&#xD;    console.log(pos);&#xD;    proc.geocords = [pos.coords.latitude,&#xD;                     pos.coords.longitude,&#xD;                     pos.coords.accuracy];&#xD;  }&#xD;&#xD;  function error(err) {&#xD;    alert("ERROR " + err.code + ": " + err.message);&#xD;  }&#xD;  proc.geostarted = true;&#xD;  proc.geocords = null;&#xD;  console.log("starting geolocation")&#xD;  geo.getCurrentPosition(success, error, options);&#xD;} else if (proc.geocords) {&#xD;  var cords = proc.geocords;&#xD;  proc.geostarted = null;&#xD;  proc.geocords = null;&#xD;  console.log("returning");&#xD;  return new List(cords);&#xD;} else {&#xD;  console.log("yielding");&#xD;  proc.pushContext(&apos;doYield&apos;);&#xD;  proc.pushContext();&#xD;}</l></block><list></list></block></block></script></block-definition><block-definition s="Store value %&apos;Value&apos; to tag %&apos;Tag&apos; in TinyWebDB" type="command" category="tinywebdb"><comment x="0" y="0" w="173" collapsed="false">Store a value in TinyWebDB service.&#xD;This is a demo service for Web Services used within Meo-Studio</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt"></input></inputs><script><block s="doReport"><custom-block s="%s url: %s send: %s headers: %mult%l"><l>POST</l><l>https://tinywebdb.codimeo.com/storeavalue</l><block s="reportJoinWords"><list><l>tag=</l><block var="Tag"/><l>&amp;value=</l><block var="Value"/></list></block><list><custom-block s="key: %s value: %s"><l>accept</l><l>application/json</l></custom-block><custom-block s="key: %s value: %s"><l>content-type</l><l>application/x-www-form-urlencoded</l></custom-block></list></custom-block></block></script></block-definition><block-definition s="Get value for tag %&apos;Tag&apos; from TinyWebDB" type="reporter" category="tinywebdb"><comment x="0" y="0" w="176" collapsed="true">Get a value from TinyWebDB service.&#xD;This is a demo service for Web Services used within Meo-Studio</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><block s="doDeclareVariables"><list><l>a</l></list></block><block s="doSetVar"><l>a</l><block s="reportListItem"><l><option>last</option></l><block s="reportTextSplit"><custom-block s="%s url: %s send: %s headers: %mult%l"><l>POST</l><l>https://tinywebdb.codimeo.com/getvalue</l><block s="reportJoinWords"><list><l>tag=</l><block var="Tag"/></list></block><list><custom-block s="key: %s value: %s"><l>accept</l><l>application/json</l></custom-block><custom-block s="key: %s value: %s"><l>content-type</l><l>application/x-www-form-urlencoded</l></custom-block></list></custom-block><l>","</l></block></block></block><block s="doReport"><block s="reportListItem"><l>1</l><block s="reportTextSplit"><block var="a"/><l>"]</l></block></block></block></script></block-definition><block-definition s="Load MQTT $flag" type="command" category="mqtt"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doIf"><block s="evaluate"><block s="reportJSFunction"><list></list><l>return window.mqtt !== undefined</l></block><list></list></block><script><block s="doStopThis"><l><option>this block</option></l></block></script></block><block s="doDeclareVariables"><list><l>test</l></list></block><block s="doSetVar"><l>test</l><block s="evaluate"><block s="reportJSFunction"><list></list><l>var mqttScript,&#xD;    done = false;&#xD;mqttScript = document.createElement(&apos;script&apos;),&#xD;mqttScript.onload = function () {&#xD;    done = true;&#xD;    console.log(&apos;MQTT is ready&apos;);&#xD;};&#xD;document.head.appendChild(mqttScript);&#xD;mqttScript.src = &apos;https://unpkg.com/mqtt/dist/mqtt.min.js&apos;;&#xD;return function () {return done; }</l></block><list></list></block></block><block s="doWaitUntil"><block s="evaluate"><block var="test"/><list></list></block></block></script></block-definition><block-definition s="MQTT new client for broker %&apos;url&apos; with options %&apos;opt&apos;" type="reporter" category="mqtt"><header></header><code></code><translations></translations><inputs><input type="%s">broker<options>moquitto (ws)=ws://test.mosquitto.org:8080/mqtt&#xD;mosca (ws)=ws://test.mosca.io/&#xD;hivemq (ws)=ws://broker.hivemq.com:8000&#xD;mosca-localhost (ws)=ws://localhost:3000&#xD;codimeo MQTT ={&#xD;  ws=ws://mqtt.codimeo.com:15675/ws&#xD;  wss=wss://mqtt.codimeo.com:15676/ws&#xD;}</options></input><input type="%s"></input></inputs><script><block s="doDeclareVariables"><list><l>client</l><l>broker</l><l>options</l></list><comment w="90" collapsed="false">Class attributes</comment></block><block s="doSetVar"><l>broker</l><block var="url"/></block><block s="doSetVar"><l>client</l><l>null</l></block><block s="doSetVar"><l>options</l><block var="opt"/></block><block s="doDeclareVariables"><list><l>connect</l><l>onevent</l><l>subscribe</l><l>unsubscribe</l><l>publish</l><l>is_connected</l><l>log_client</l><l>log_parent_sprite</l><l>end</l></list><comment w="90" collapsed="false">Class methods</comment></block><block s="doSetVar"><l>connect</l><block s="reifyScript"><script><block s="doIfElse"><block s="reportEquals"><block var="client"/><l>null</l></block><script><block s="doSetVar"><l>client</l><block s="evaluate"><block s="reportJSFunction"><list><l>broker</l><l>client</l><l>options</l></list><l>console.log("Client is null")&#xD;console.log("Options : ")&#xD;console.log(JSON.stringify(options))&#xD;&#xD;if(!world.mqttClients) {&#xD;  world.mqttClients = []&#xD;}&#xD;&#xD;for(var i=0; i &lt; world.mqttClients.length; i++) {&#xD;  //First, ensure that all mqtt Clients are ended.&#xD;  //Otherwise, opended websocket will continue pinging&#xD;  world.mqttClients[i].end()&#xD;}&#xD;&#xD;// Then purge the clients&apos; list&#xD;world.mqttClients.splice(0)&#xD;&#xD;client = mqtt.connect(broker, options)&#xD;console.log("Created new client")&#xD;console.log(client.options.clientId)&#xD;&#xD;client.parent = this&#xD;options = client.options&#xD;&#xD;world.mqttClients.push(client)&#xD;return client</l></block><list><block var="broker"/><block var="client"/><block var="options"/></list></block></block></script><script><block s="doSetVar"><l>client</l><block s="evaluate"><block s="reportJSFunction"><list><l>broker</l><l>client</l><l>options</l></list><l>if(client.connected) {&#xD;  console.log("Client is connected yet")&#xD;  return&#xD;}&#xD;client = mqtt.connect(broker, options)&#xD;console.log("Created new client")&#xD;console.log(client.options.clientId)&#xD;return client</l></block><list><block var="broker"/><block var="client"/><block var="options"/></list></block></block></script></block></script><list></list></block></block><block s="doSetVar"><l>onevent</l><block s="reifyScript"><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l><l>message</l><l>callback</l></list><l>client.on(message, function (t,m,p) {&#xD;  console.log("This client :" + this)&#xD;  console.log("Client&apos;s parent :" + this.parent)&#xD;  invoke(callback, new List([t, m, p]))&#xD;})</l></block><list><block var="client"/><block var="message"/><block var="callback"/></list></block></script><list><l>message</l><l>callback</l></list></block></block><block s="doSetVar"><l>subscribe</l><block s="reifyScript"><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l><l>topic</l></list><l>client.subscribe(topic)&#xD;console.log("Subscribed to " + topic)</l></block><list><block var="client"/><block var="topic"/></list></block></script><list><l>topic</l></list></block></block><block s="doSetVar"><l>unsubscribe</l><block s="reifyScript"><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l><l>topic</l></list><l>client.unsubscribe(topic)</l></block><list><block var="client"/><block var="topic"/></list></block></script><list><l>topic</l></list></block></block><block s="doSetVar"><l>publish</l><block s="reifyScript"><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l><l>topic</l><l>message</l></list><l>client.publish(topic, message.toString(), function(err){&#xD;  if (err) {&#xD;    console.log("err : " + err)&#xD;  }&#xD;  else {&#xD;    console.log("Publish succeeded")&#xD;  }&#xD;})</l></block><list><block var="client"/><block var="topic"/><block var="message"/></list></block></script><list><l>topic</l><l>message</l></list></block></block><block s="doSetVar"><l>is_connected</l><block s="reifyScript"><script><block s="doIfElse"><block s="reportEquals"><block var="client"/><l>null</l></block><script><block s="doReport"><block s="reportBoolean"><l><bool>false</bool></l></block></block></script><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>client</l></list><l>return client.connected</l></block><list><block var="client"/></list></block></block></script></block></script><list></list></block></block><block s="doSetVar"><l>log_client</l><block s="reifyScript"><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l></list><l>console.log(client)</l></block><list><block var="client"/></list></block><block s="doReport"><block var="client"/></block></script><list></list></block></block><block s="doSetVar"><l>log_parent_sprite</l><block s="reifyScript"><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l></list><l>console.log(client.parent)</l></block><list><block var="client"/></list></block></script><list></list></block></block><block s="doSetVar"><l>end</l><block s="reifyScript"><script><block s="doIfElse"><block s="reportNot"><block s="reportEquals"><block var="client"/><l>null</l></block></block><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l><l>force</l></list><l>console.log(client.options.clientId + " is disconnecting...")&#xD;client.end(force)&#xD;world.mqttClients.splice(world.mqttClients.findIndex(function(c) {&#xD;  return client.options.clientId === c.options.clientId&#xD;}),1)</l></block><list><block var="client"/><block var="force"/></list></block><block s="doSetVar"><l>client</l><l>null</l></block></script><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l></list><l>console.log("No client connected yet.")</l></block><list><block var="client"/></list></block></script></block></script><list><l>force</l></list></block></block><block s="doReport"><block s="reifyScript"><script><block s="doIf"><block s="reportEquals"><block var="message"/><l>connect</l></block><script><block s="doReport"><block var="connect"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>onevent</l></block><script><block s="doReport"><block var="onevent"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>subscribe</l></block><script><block s="doReport"><block var="subscribe"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>unsubscribe</l></block><script><block s="doReport"><block var="unsubscribe"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>publish</l></block><script><block s="doReport"><block var="publish"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>is_connected</l></block><script><block s="doReport"><block var="is_connected"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>log_client</l></block><script><block s="doReport"><block var="log_client"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>log_parent_sprite</l></block><script><block s="doReport"><block var="log_parent_sprite"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>end</l></block><script><block s="doReport"><block var="end"/></block></script></block><block s="doReport"><block s="reportJoinWords"><list><l></l><block var="message"/></list></block></block></script><list><l>message</l></list></block><comment w="90" collapsed="false">and the main body of the class</comment></block></script><scripts><script x="285" y="3347.0000000000086"><block s="doSetVar"><l>got message</l><block s="reportBoolean"><l><bool>false</bool></l></block></block></script></scripts></block-definition><block-definition s="Connect %&apos;client&apos;" type="command" category="mqtt"><header></header><code></code><translations></translations><inputs><input type="%s">mqtt-client</input></inputs><script><block s="doRun"><block s="evaluate"><block var="client"/><list><l>connect</l></list></block><list></list></block><block s="doWaitUntil"><block s="evaluate"><block var="client"/><list><l>is_connected</l></list></block></block></script></block-definition><block-definition s="End %&apos;client&apos; with force %&apos;force&apos;" type="command" category="mqtt"><comment x="0" y="0" w="156" collapsed="false">End MQTT Client with force True or False. Default : False</comment><header></header><code></code><translations></translations><inputs><input type="%s">mqtt-client</input><input type="%b"></input></inputs><script><block s="doRun"><block s="evaluate"><block var="client"/><list><l>end</l></list></block><list><block var="force"/></list></block><block s="doWaitUntil"><block s="reportNot"><custom-block s="%s is connected ?"><block var="client"/></custom-block></block></block></script></block-definition><block-definition s="Publish %&apos;payload&apos; on %&apos;topic&apos; for %&apos;client&apos;" type="command" category="mqtt"><header></header><code></code><translations></translations><inputs><input type="%s">message</input><input type="%txt">topic</input><input type="%s">mqtt-client</input></inputs><script><block s="doRun"><block s="evaluate"><block var="client"/><list><l>publish</l></list></block><list><block var="topic"/><block var="payload"/></list></block></script></block-definition><block-definition s="Subscribe %&apos;client&apos; to %&apos;topic&apos;" type="command" category="mqtt"><header></header><code></code><translations></translations><inputs><input type="%s">mqtt client</input><input type="%s">topic</input></inputs><script><block s="doRun"><block s="evaluate"><block var="client"/><list><l>subscribe</l></list></block><list><block var="topic"/></list></block></script></block-definition><block-definition s="%&apos;client&apos; is connected ?" type="predicate" category="mqtt"><header></header><code></code><translations></translations><inputs><input type="%s">mqtt-client</input></inputs><script><block s="doRun"><block s="evaluate"><block var="client"/><list><l>is_connected</l></list></block><list></list></block></script></block-definition><block-definition s="JSON from %&apos;list&apos;" type="reporter" category="operators"><header></header><code></code><translations></translations><inputs><input type="%l"></input></inputs><script><block s="doDeclareVariables"><list><l>a</l><l>item</l><l>index</l></list></block><block s="doSetVar"><l>index</l><l>0</l></block><block s="doSetVar"><l>a</l><l>{</l></block><block s="doRepeat"><block s="reportListLength"><block var="list"/></block><script><block s="doChangeVar"><l>index</l><l>1</l></block><block s="doSetVar"><l>item</l><block s="reportListItem"><block var="index"/><block var="list"/></block></block><block s="doSetVar"><l>a</l><block s="reportJoinWords"><list><block var="a"/><l>"</l><block s="reportListItem"><l>1</l><block var="item"/></block><l>":"</l><block s="reportListItem"><l>2</l><block var="item"/></block><l>",</l></list></block></block></script></block><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>json</l></list><l>return JSON.parse(json)</l></block><list><block s="reportJoinWords"><list><block var="a"/><l>"end":"" }</l></list></block></list></block></block></script></block-definition><block-definition s="on %&apos;client&apos; %&apos;event&apos; %&apos;do&apos; with %&apos;arg1&apos; %&apos;arg2&apos; %&apos;arg3&apos;" type="command" category="mqtt"><header></header><code></code><translations></translations><inputs><input type="%s">mqtt-client</input><input type="%txt">event</input><input type="%cs"></input><input type="%upvar"></input><input type="%upvar"></input><input type="%upvar"></input></inputs><script><block s="doRun"><block s="evaluate"><block var="client"/><list><l>onevent</l></list></block><list><block var="event"/><block s="reifyScript"><script><block s="doSetVar"><l>arg1</l><block var="#1"/></block><block s="doSetVar"><l>arg2</l><block var="#2"/></block><block s="doSetVar"><l>arg3</l><block var="#3"/></block><block s="doRun"><block var="do"/><list></list></block></script><list><l>#1</l><l>#2</l><l>#3</l></list></block></list></block></script><scripts><script x="20" y="295.00000399999993"><block s="doRun"><block s="reportJSFunction"><list><l>a1</l><l>a2</l><l>a3</l></list><l>console.log(this)&#xD;console.log(a1)&#xD;console.log(a2)&#xD;console.log(a3)</l></block><list><block var="arg1"/><block var="arg2"/><block var="arg3"/></list><comment w="207" collapsed="false">Do not remove this block. It may help to debug your callback</comment></block></script></scripts></block-definition><block-definition s="listify %&apos;jsonString&apos;" type="reporter" category="operators"><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>jsonString</l></list><l>return listify(JSON.parse(jsonString));&#xD;&#xD;function listify(jsonObject) {&#xD;  if (jsonObject instanceof Array) {&#xD;    return new List(jsonObject.map(function(eachElement) { return listify(eachElement)}));&#xD;  } else if (jsonObject instanceof Object) {&#xD;    return new List(Object.keys(jsonObject).map(function(eachKey) { return new List([eachKey,listify(jsonObject[eachKey])])} ))&#xD;  } else {&#xD;    return jsonObject&#xD;  }&#xD;}</l></block><list><block var="jsonString"/></list></block></block></script></block-definition><block-definition s="# %&apos;comment&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%code">your comment line here</input></inputs></block-definition></blocks><variables><variable name="T"><l>Hello</l></variable><variable name="M"><l>left</l></variable><variable name="P"><list id="998"><item><list struct="atomic" id="999">cmd,publish</list></item><item><list id="1000"><item><l>retain</l></item><item><bool>false</bool></item></list></item><item><list struct="atomic" id="1001">qos,0</list></item><item><list id="1002"><item><l>dup</l></item><item><bool>false</bool></item></list></item><item><list struct="atomic" id="1003">length,11</list></item><item><list struct="atomic" id="1004">topic,Hello</list></item><item><list id="1005"><item><l>payload</l></item><item><list id="1006"><item><list struct="atomic" id="1007">type,Buffer</list></item><item><list id="1008"><item><l>data</l></item><item><list struct="atomic" id="1009">108,101,102,116</list></item></list></item></list></item></list></item></list></variable><variable name="Client"><context id="1010"><inputs><input>message</input></inputs><variables></variables><script><block s="doIf"><block s="reportEquals"><block var="message"/><l>connect</l></block><script><block s="doReport"><block var="connect"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>onevent</l></block><script><block s="doReport"><block var="onevent"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>subscribe</l></block><script><block s="doReport"><block var="subscribe"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>unsubscribe</l></block><script><block s="doReport"><block var="unsubscribe"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>publish</l></block><script><block s="doReport"><block var="publish"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>is_connected</l></block><script><block s="doReport"><block var="is_connected"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>log_client</l></block><script><block s="doReport"><block var="log_client"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>log_parent_sprite</l></block><script><block s="doReport"><block var="log_parent_sprite"/></block></script></block><block s="doIf"><block s="reportEquals"><block var="message"/><l>end</l></block><script><block s="doReport"><block var="end"/></block></script></block><block s="doReport"><block s="reportJoinWords"><list><l></l><block var="message"/></list></block></block></script><receiver><ref id="8"></ref></receiver><origin><ref id="8"></ref></origin><context id="1101"><inputs></inputs><variables><variable name="url"><l>wss://mqtt.codimeo.com:15676/ws</l></variable><variable name="opt"></variable><variable name="client"></variable><variable name="broker"><l>wss://mqtt.codimeo.com:15676/ws</l></variable><variable name="options"></variable><variable name="connect"><context id="1103"><inputs></inputs><variables></variables><script><block s="doIfElse"><block s="reportEquals"><block var="client"/><l>null</l></block><script><block s="doSetVar"><l>client</l><block s="evaluate"><block s="reportJSFunction"><list><l>broker</l><l>client</l><l>options</l></list><l>console.log("Client is null")&#xD;console.log("Options : ")&#xD;console.log(JSON.stringify(options))&#xD;&#xD;if(!world.mqttClients) {&#xD;  world.mqttClients = []&#xD;}&#xD;&#xD;for(var i=0; i &lt; world.mqttClients.length; i++) {&#xD;  //First, ensure that all mqtt Clients are ended.&#xD;  //Otherwise, opended websocket will continue pinging&#xD;  world.mqttClients[i].end()&#xD;}&#xD;&#xD;// Then purge the clients&apos; list&#xD;world.mqttClients.splice(0)&#xD;&#xD;client = mqtt.connect(broker, options)&#xD;console.log("Created new client")&#xD;console.log(client.options.clientId)&#xD;&#xD;client.parent = this&#xD;options = client.options&#xD;&#xD;world.mqttClients.push(client)&#xD;return client</l></block><list><block var="broker"/><block var="client"/><block var="options"/></list></block></block></script><script><block s="doSetVar"><l>client</l><block s="evaluate"><block s="reportJSFunction"><list><l>broker</l><l>client</l><l>options</l></list><l>if(client.connected) {&#xD;  console.log("Client is connected yet")&#xD;  return&#xD;}&#xD;client = mqtt.connect(broker, options)&#xD;console.log("Created new client")&#xD;console.log(client.options.clientId)&#xD;return client</l></block><list><block var="broker"/><block var="client"/><block var="options"/></list></block></block></script></block></script><receiver><ref id="8"></ref></receiver><origin><ref id="8"></ref></origin><ref id="1101"></ref></context></variable><variable name="onevent"><context id="1149"><inputs><input>message</input><input>callback</input></inputs><variables></variables><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l><l>message</l><l>callback</l></list><l>client.on(message, function (t,m,p) {&#xD;  console.log("This client :" + this)&#xD;  console.log("Client&apos;s parent :" + this.parent)&#xD;  invoke(callback, new List([t, m, p]))&#xD;})</l></block><list><block var="client"/><block var="message"/><block var="callback"/></list></block></script><receiver><ref id="8"></ref></receiver><origin><ref id="8"></ref></origin><ref id="1101"></ref></context></variable><variable name="subscribe"><context id="1166"><inputs><input>topic</input></inputs><variables></variables><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l><l>topic</l></list><l>client.subscribe(topic)&#xD;console.log("Subscribed to " + topic)</l></block><list><block var="client"/><block var="topic"/></list></block></script><receiver><ref id="8"></ref></receiver><origin><ref id="8"></ref></origin><ref id="1101"></ref></context></variable><variable name="unsubscribe"><context id="1181"><inputs><input>topic</input></inputs><variables></variables><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l><l>topic</l></list><l>client.unsubscribe(topic)</l></block><list><block var="client"/><block var="topic"/></list></block></script><receiver><ref id="8"></ref></receiver><origin><ref id="8"></ref></origin><ref id="1101"></ref></context></variable><variable name="publish"><context id="1196"><inputs><input>topic</input><input>message</input></inputs><variables></variables><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l><l>topic</l><l>message</l></list><l>client.publish(topic, message.toString(), function(err){&#xD;  if (err) {&#xD;    console.log("err : " + err)&#xD;  }&#xD;  else {&#xD;    console.log("Publish succeeded")&#xD;  }&#xD;})</l></block><list><block var="client"/><block var="topic"/><block var="message"/></list></block></script><receiver><ref id="8"></ref></receiver><origin><ref id="8"></ref></origin><ref id="1101"></ref></context></variable><variable name="is_connected"><context id="1213"><inputs></inputs><variables></variables><script><block s="doIfElse"><block s="reportEquals"><block var="client"/><l>null</l></block><script><block s="doReport"><block s="reportBoolean"><l><bool>false</bool></l></block></block></script><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>client</l></list><l>return client.connected</l></block><list><block var="client"/></list></block></block></script></block></script><receiver><ref id="8"></ref></receiver><origin><ref id="8"></ref></origin><ref id="1101"></ref></context></variable><variable name="log_client"><context id="1241"><inputs></inputs><variables></variables><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l></list><l>console.log(client)</l></block><list><block var="client"/></list></block><block s="doReport"><block var="client"/></block></script><receiver><ref id="8"></ref></receiver><origin><ref id="8"></ref></origin><ref id="1101"></ref></context></variable><variable name="log_parent_sprite"><context id="1256"><inputs></inputs><variables></variables><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l></list><l>console.log(client.parent)</l></block><list><block var="client"/></list></block></script><receiver><ref id="8"></ref></receiver><origin><ref id="8"></ref></origin><ref id="1101"></ref></context></variable><variable name="end"><context id="1269"><inputs><input>force</input></inputs><variables></variables><script><block s="doIfElse"><block s="reportNot"><block s="reportEquals"><block var="client"/><l>null</l></block></block><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l><l>force</l></list><l>console.log(client.options.clientId + " is disconnecting...")&#xD;client.end(force)&#xD;world.mqttClients.splice(world.mqttClients.findIndex(function(c) {&#xD;  return client.options.clientId === c.options.clientId&#xD;}),1)</l></block><list><block var="client"/><block var="force"/></list></block><block s="doSetVar"><l>client</l><l>null</l></block></script><script><block s="doRun"><block s="reportJSFunction"><list><l>client</l></list><l>console.log("No client connected yet.")</l></block><list><block var="client"/></list></block></script></block></script><receiver><ref id="8"></ref></receiver><origin><ref id="8"></ref></origin><ref id="1101"></ref></context></variable></variables><receiver><ref id="8"></ref></receiver><origin></origin></context></context></variable><variable name="got message"><l>0</l></variable></variables></project>